#!/usr/bin/env bash

check_factor() {
    local num=$1
    local factors=($(factor "$num"))  # Get all factors of the number

    # Check if we have exactly two factors (excluding the original number itself)
    if [ ${#factors[@]} -eq 3 ]; then
        local p=${factors[1]}
        local q=${factors[2]}
        echo "$num=$p*$q"
    else
        # If we don't get exactly two factors, print an error or handle accordingly
        echo "$num cannot be factorized into exactly two primes."
    fi
}

# Check that we have exactly one argument (the file to read numbers from)
if [ $# -ne 1 ]; then
    echo 'Usage: rsa <file>'
    exit 1
else
    # Read each number from the file and factorize it
    while read -r i; do
        check_factor "$i"
    done < "$1"
fi
